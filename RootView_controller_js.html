<script>
  function rootViewInit(pView) {
      let oModel = new sap.ui.model.json.JSONModel();
      let oInitData = initData();
      oModel.setData(oInitData);
      pView.setModel(oModel);
      // sap.ui.getCore().setModel(oModel);

      getRangeData("Store", "A2:A", "", true).then((res) => {
        let t = [];

        for (var i = 0; i < res.length; i++){
            t.push({ "key" : i,
                     "text": res[i]
                   });
        }

        oInitData.DDStore = t;
        oModel.setData(oInitData);
        pView.setModel(oModel);
      })    
  }

  
  function root_btnAdd() {
    let oView    = window.rootView;
    let keyStore = oView.byId("idDDStore").getSelectedKey(),
        keyIngre = oView.byId("idDDIngre").getSelectedKey()

    console.log(keyStore);
    if ( keyStore === "" || keyStore === " " ) {
      sap.m.MessageToast.show("Please select a store!");
      return;
    }
    if ( keyIngre === "" || keyIngre === " " ) {
      sap.m.MessageToast.show("Please select an ingredient!");
      return;
    }

  }


  function root_storeComboChange() {
    let oView    = window.rootView;
    let keyStore = oView.byId("idDDStore").getSelectedKey();
    let keyItem  = oView.byId("idDDStore").getSelectedItem();

    console.log(keyItem.getBindingContext().getObject().key);
    console.log(keyItem.getBindingContext().getObject().text);
  }
</script>
